{% assign title = title %}
{% assign variant_color = variant_color %}
{% assign variant_colors = variant_colors %}
{% assign lazy_load = lazy_load %}
{% assign product = product %}
{% assign variant = variant %}
{% assign idx = idx %}

<div class='tw-flex tw-flex-col tw-justify-between tw-h-full'>
  {% if variant.featured_media.preview_image != blank and product.metafields.custom.product_video != blank %}
    <div class='product-card'>
      <div class='product-image tw-w-full tw-relative' style='aspect-ratio: 4/5;'>
        <img
          src='{{ variant.featured_media.preview_image | image_url: width: 1000 }}'
          alt='{{ product.title }}'
          class='tw-w-full tw-h-full tw-absolute tw-inset-0 tw-object-cover'
          width='100%'
          height='100%'
          {% if lazy_load %}
            loading='lazy'
          {% endif %}
        >
      </div>
      <div class='product-video tw-w-full tw-relative' style='opacity: 0; display: none; aspect-ratio: 4/5;'>
        <video
          src='{{ product.metafields.custom.product_video | file_url }}'
          autoplay
          muted
          playsinline
          loop
          class='tw-w-full tw-h-full tw-absolute tw-inset-0 tw-object-cover tw-object-center'
        ></video>
      </div>
    </div>
  {% elsif variant.featured_media.preview_image != blank %}
    <img
      src='{{ variant.featured_media.preview_image | img_url: 'master' }}'
      alt='{{ product.title }}'
      class='tw-w-full tw-h-auto tw-object-cover tw-object-center'
      width='100%'
      height='auto'
      {% if lazy_load %}
        loading='lazy'
      {% endif %}
    >
  {% elsif product.featured_image != blank %}
    <img
      src='{{ product.featured_image | img_url: 'master' }}'
      alt='{{ product.title }}'
      class='tw-w-full tw-h-auto tw-object-cover tw-object-center'
      width='100%'
      height='auto'
      {% if lazy_load %}
        loading='lazy'
      {% endif %}
    >
  {% endif %}

  <div class='md:tw-flex tw-flex-col tw-gap-3 tw-hidden tw-border-t tw-border-black tw-pt-3'>
    <p class='p3'>{{ title }}</p>
    <p class='p3'>{{ product.price | money }}</p>
    {% render 'color-swatches', color_options: variant_colors, active_color: variant_color %}
  </div>
</div>
